<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Zone</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: 'Arial', sans-serif; background-color: #1a1a2d; color: white; text-align: center; padding: 20px; }
        .container { max-width: 400px; margin: auto; }
        .card { background: #16213e; padding: 20px; border-radius: 15px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.5); }
        h2 { color: #0f3460; background: #e94560; display: inline-block; padding: 5px 15px; border-radius: 5px; }
        button { background: #e94560; color: white; border: none; padding: 10px 20px; border-radius: 5px; font-size: 16px; cursor: pointer; margin-top: 10px; transition: 0.3s; }
        button:active { transform: scale(0.95); }
        input { padding: 10px; border-radius: 5px; border: none; width: 70%; margin: 5px 0; }
        
        /* Animations */
        .dice { font-size: 50px; display: inline-block; transition: transform 0.5s; }
        .coin { width: 60px; height: 60px; background: gold; border-radius: 50%; display: inline-block; line-height: 60px; color: black; font-weight: bold; border: 4px solid orange; }
        .spin-wheel { font-size: 50px; display: inline-block; transition: transform 2s ease-out; }
        
        .shake { animation: shake 0.5s infinite; }
        @keyframes shake { 0% { transform: rotate(0deg); } 25% { transform: rotate(10deg); } 50% { transform: rotate(0deg); } 75% { transform: rotate(-10deg); } 100% { transform: rotate(0deg); } }
        
        .flip { animation: flip 1s ease-in-out; }
        @keyframes flip { 0% { transform: rotateY(0); } 100% { transform: rotateY(720deg); } }
    </style>
</head>
<body>

<div class="container">
    <h1>üéÆ ‡¶ó‡ßá‡¶Æ ‡¶ú‡ßã‡¶®</h1>
    <p>‡¶ñ‡ßá‡¶≤‡ßá ‡¶ú‡¶ø‡¶§‡ßá ‡¶®‡¶ø‡¶® ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü!</p>

    <div class="card">
        <h3>üé≤ ‡¶≤‡¶æ‡¶ï‡¶ø ‡¶°‡¶æ‡¶á‡¶∏</h3>
        <p>‡¶ñ‡¶∞‡¶ö: ‡ßß‡ß¶ ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü | ‡¶ú‡¶ø‡¶§‡¶≤‡ßá: ‡ß®‡ß¶ ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü</p>
        <div id="diceIcon" class="dice">üé≤</div><br>
        <button onclick="playDice()">‡¶∞‡ßã‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        <p id="diceResult"></p>
    </div>

    <div class="card">
        <h3>ü™ô ‡¶ï‡ßü‡ßá‡¶® ‡¶ü‡¶∏</h3>
        <p>‡¶ñ‡¶∞‡¶ö: ‡ß®‡ß¶ ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü | ‡¶ú‡¶ø‡¶§‡¶≤‡ßá: ‡ß™‡ß¶ ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü</p>
        <div id="coinIcon" class="coin">?</div><br>
        <button onclick="playToss()">‡¶ü‡¶∏ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        <p id="tossResult"></p>
    </div>

    <div class="card">
        <h3>üé∞ ‡¶≤‡¶æ‡¶ï‡¶ø ‡¶∏‡ßç‡¶™‡¶ø‡¶®</h3>
        <p>‡¶ñ‡¶∞‡¶ö: ‡ß®‡ß¶ ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü | ‡¶â‡¶á‡¶®: ‡ß¶-‡ßß‡ß¶‡ß¶</p>
        <div id="spinIcon" class="spin-wheel">üé°</div><br>
        <button onclick="playSpin()">‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        <p id="spinResult"></p>
    </div>

    <div class="card">
        <h3>‚ù§Ô∏è ‡¶≤‡¶æ‡¶≠ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤‡¶ï‡ßÅ‡¶≤‡ßá‡¶ü‡¶∞</h3>
        <p>‡¶ñ‡¶∞‡¶ö: ‡ß´ ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü</p>
        <input type="text" id="name1" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ">
        <input type="text" id="name2" placeholder="‡¶™‡¶æ‡¶∞‡ßç‡¶ü‡¶®‡¶æ‡¶∞‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ"><br>
        <button onclick="playLove()">‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        <p id="loveResult"></p>
    </div>
</div>

<script>
    let tg = window.Telegram.WebApp;
    tg.expand();

    function sendDataToBot(game, result, points, message) {
        // ‡ß© ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶¨‡ßã‡¶ü‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶¨‡ßá ‡¶Ø‡¶æ‡¶§‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡ßü
        setTimeout(() => {
            const data = JSON.stringify({
                game: game,
                points: points,
                msg: message
            });
            tg.sendData(data);
        }, 2000);
    }

    function playDice() {
        let dice = document.getElementById("diceIcon");
        let resText = document.getElementById("diceResult");
        dice.classList.add("shake");
        resText.innerText = "‡¶ò‡ßÅ‡¶∞‡¶õ‡ßá...";
        
        setTimeout(() => {
            dice.classList.remove("shake");
            let score = Math.floor(Math.random() * 6) + 1;
            let win = score >= 4;
            let points = win ? 20 : -10; // -10 for cost, +20 win means net +10
            // Logic: Cost is deducted in bot, so sending net change
            // Simplified: We assume bot checks balance first. 
            // Here we send ONLY Win/Loss amount instruction.
            
            dice.innerText = ["‚öÄ", "‚öÅ", "‚öÇ", "‚öÉ", "‚öÑ", "‚öÖ"][score-1];
            resText.innerText = `‡¶∞‡ßá‡¶ú‡¶æ‡¶≤‡ßç‡¶ü: ${score} (${win ? "‡¶ú‡¶ø‡¶§‡ßá‡¶õ‡ßá‡¶®!" : "‡¶π‡ßá‡¶∞‡ßá‡¶õ‡ßá‡¶®"})`;
            
            if(win) sendDataToBot("dice", "win", 10, `üé≤ ‡¶°‡¶æ‡¶á‡¶∏ ‡¶∞‡ßã‡¶≤: ${score} (‡¶ú‡¶ø‡¶§‡ßá‡¶õ‡ßá‡¶®! +10)`);
            else sendDataToBot("dice", "loss", -10, `üé≤ ‡¶°‡¶æ‡¶á‡¶∏ ‡¶∞‡ßã‡¶≤: ${score} (‡¶π‡ßá‡¶∞‡ßá‡¶õ‡ßá‡¶®! -10)`);
        }, 1000);
    }

    function playToss() {
        let coin = document.getElementById("coinIcon");
        let resText = document.getElementById("tossResult");
        coin.classList.add("flip");
        resText.innerText = "‡¶ü‡¶∏ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...";

        setTimeout(() => {
            coin.classList.remove("flip");
            let isHead = Math.random() < 0.5;
            let result = isHead ? "Head" : "Tail";
            let userChoice = "Head"; // Default assumption user wants Head
            
            coin.innerText = isHead ? "H" : "T";
            // Random win/loss logic
            let win = Math.random() < 0.5; 
            resText.innerText = `‡¶´‡¶≤‡¶æ‡¶´‡¶≤: ${result} (${win ? "‡¶ú‡¶ø‡¶§‡ßá‡¶õ‡ßá‡¶®!" : "‡¶π‡ßá‡¶∞‡ßá‡¶õ‡ßá‡¶®"})`;

            if(win) sendDataToBot("toss", "win", 20, `ü™ô ‡¶ü‡¶∏ ‡¶∞‡ßá‡¶ú‡¶æ‡¶≤‡ßç‡¶ü: ${result} (‡¶ú‡¶ø‡¶§‡ßá‡¶õ‡ßá‡¶®! +20)`);
            else sendDataToBot("toss", "loss", -20, `ü™ô ‡¶ü‡¶∏ ‡¶∞‡ßá‡¶ú‡¶æ‡¶≤‡ßç‡¶ü: ${result} (‡¶π‡ßá‡¶∞‡ßá‡¶õ‡ßá‡¶®! -20)`);
        }, 1000);
    }

    function playSpin() {
        let wheel = document.getElementById("spinIcon");
        let resText = document.getElementById("spinResult");
        wheel.style.transform = "rotate(1080deg)";
        resText.innerText = "‡¶ò‡ßÅ‡¶∞‡¶õ‡ßá...";

        setTimeout(() => {
            wheel.style.transform = "rotate(0deg)";
            let prizes = [-20, 10, 50, -20, 100, 0];
            let win = prizes[Math.floor(Math.random() * prizes.length)];
            
            resText.innerText = `‡¶Ü‡¶™‡¶®‡¶ø ‡¶™‡ßá‡ßü‡ßá‡¶õ‡ßá‡¶®: ${win} ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü`;
            sendDataToBot("spin", "win", win, `üé∞ ‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶∞‡ßá‡¶ú‡¶æ‡¶≤‡ßç‡¶ü: ${win} ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü`);
        }, 2000);
    }

    function playLove() {
        let n1 = document.getElementById("name1").value;
        let n2 = document.getElementById("name2").value;
        if(!n1 || !n2) { alert("‡¶®‡¶æ‡¶Æ ‡¶¶‡¶ø‡¶®!"); return; }

        let score = Math.floor(Math.random() * 40) + 60;
        document.getElementById("loveResult").innerText = `‚ù§Ô∏è ‡¶≠‡¶æ‡¶≤‡ßã‡¶¨‡¶æ‡¶∏‡¶æ: ${score}%`;
        
        sendDataToBot("love", "calc", -5, `‚ù§Ô∏è ${n1} + ${n2} = ${score}% ‡¶≤‡¶æ‡¶≠! (-5 ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü)`);
    }
</script>

</body>
</html>
